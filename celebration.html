<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Celebration</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#ff4fa3;
    --gold:#ffb199;
  }
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{
    height:100%;
    font-family:"Poppins",sans-serif;
    overflow-x:hidden;
  }

  /* Background Image */
  body{
    background:url("photo14.jpg") center/cover no-repeat fixed;
    position:relative;
  }
  body::before{
    content:"";
    position:absolute;inset:0;
    background:rgba(0,0,0,0.65);
    z-index:0;
  }

  /* COUNTDOWN */
  #countdownWrap{
    position:fixed;inset:0;
    display:flex;align-items:center;justify-content:center;
    background:#000;
    z-index:50;
    transition:opacity .6s ease;
  }
  #countdown{
    font-weight:900;
    color:var(--accent);
    text-shadow:0 0 40px rgba(255,79,163,.4),0 0 90px rgba(255,79,163,.25);
    font-size:clamp(60px,20vw,200px);
    user-select:none;
  }

  /* MAIN CONTENT */
  .main{
    position:relative;
    z-index:1;
    min-height:100vh;
    padding:28px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
  }

  h1{
    margin-top:20px;
    font-size:clamp(42px,7vw,72px);
    color:var(--accent);
    text-shadow:0 0 25px rgba(255,79,163,.35),0 0 80px rgba(255,79,163,.25);
  }

  #cakeSection{
    display:none;
    flex-direction:column;
    align-items:center;
    gap:22px;
    margin-top:8vh;
  }
  #cakeImg{
    width:360px;
    max-width:90vw;
    border-radius:16px;
    opacity:0;
    transition:opacity .8s ease;
    box-shadow:0 20px 60px rgba(0,0,0,.6),0 0 30px rgba(255,79,163,.12);
  }

  .btn{
    background:linear-gradient(135deg,var(--accent),var(--gold));
    color:#000;
    padding:14px 26px;
    border-radius:999px;
    border:none;
    font-weight:700;
    cursor:pointer;
    font-size:18px;
    box-shadow:0 10px 30px rgba(255,79,163,.25);
  }

  /* Confetti canvas covers full screen */
  #confetti-canvas{
    position:fixed;
    inset:0;
    z-index:1200;
    pointer-events:none;
    display:block;
  }

  /* Gift Popup */
  #giftPopup{
    display:none;
    position:fixed;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    background:#111;
    padding:20px;
    border-radius:14px;
    text-align:center;
    z-index:1500;
    max-width:90vw;
    box-shadow:0 0 30px rgba(0,0,0,.7);
  }
  /* ‚úÖ Heading text white */
  #giftPopup h3{
    color:#ffffff;
  }
  #giftIcon{
    width:110px;
    cursor:pointer;
    filter:drop-shadow(0 0 6px #ff69b4);
  }
  #giftModal{display:none;position:relative;margin-top:12px;}
  #giftModal img{
    width:75vw;max-width:960px;max-height:80vh;
    border-radius:12px;
    box-shadow:0 30px 80px rgba(0,0,0,.7);
  }
  #giftModal p{margin-top:14px;font-size:1.1rem;color:#ffd9ed;}
  .closeBtn{
    position:absolute;
    right:8px;top:8px;
    background:rgba(0,0,0,.6);
    border:none;color:#fff;
    width:36px;height:36px;
    border-radius:8px;
    cursor:pointer;font-weight:700;
    font-size:18px;
  }

  .memoriesWrap{margin-top:32px;}
  .memBtn{
    text-decoration:none;
    padding:12px 24px;
    border-radius:999px;
    background:rgba(255,255,255,.1);
    color:#fff;
    font-weight:700;
    border:1px solid rgba(255,255,255,.2);
  }
</style>
</head>
<body>

<!-- COUNTDOWN -->
<div id="countdownWrap">
  <div id="countdown">15</div>
</div>

<!-- MAIN CONTENT -->
<div class="main" aria-hidden="true">
  <h1>üéâ Happy Birthday Ankita üéâ</h1>

  <div id="cakeSection">
    <img id="cakeImg" src="cake.png.jpg" alt="Cake">
    <button id="cutBtn" class="btn">üéÇ Cut the Cake</button>

    <div class="memoriesWrap">
      <button id="goMemBtn" class="btn">‚ú® Go to Memories ‚ú®</button>
    </div>
  </div>
</div>

<!-- Confetti Canvas -->
<canvas id="confetti-canvas"></canvas>

<!-- Gift Popup -->
<div id="giftPopup">
  <h3>Here's a small gift for you from Prakhar üíù</h3>
  <img id="giftIcon" src="https://cdn-icons-png.flaticon.com/512/869/869636.png" alt="Gift Icon">
  <div id="giftModal">
    <button class="closeBtn" id="closeGiftBtn">‚úï</button>
    <img src="photo13.jpg" alt="Gift Photo">
    <p>Here's some flowers for my cutie from another cutie ü•∞</p>
  </div>
</div>

<!-- Audio -->
<audio id="bgAudio" src="audio.mp3" loop></audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
const COUNTDOWN_TIME = 15;
const countdownWrap = document.getElementById('countdownWrap');
const countdownEl = document.getElementById('countdown');
const mainEl = document.querySelector('.main');
const cakeSection = document.getElementById('cakeSection');
const cakeImg = document.getElementById('cakeImg');
const cutBtn = document.getElementById('cutBtn');
const goMemBtn = document.getElementById('goMemBtn');
const bgAudio = document.getElementById('bgAudio');

const giftPopup = document.getElementById('giftPopup');
const giftIcon = document.getElementById('giftIcon');
const giftModal = document.getElementById('giftModal');
const closeGiftBtn = document.getElementById('closeGiftBtn');

let remaining = COUNTDOWN_TIME;
countdownEl.textContent = remaining;

/* countdown tick */
const timer = setInterval(()=>{
  remaining--;
  if(remaining>=0) countdownEl.textContent = remaining;
  if(remaining<=0){
    clearInterval(timer);
    finishCountdown();
  }
},1000);

function finishCountdown(){
  countdownWrap.style.opacity='0';
  setTimeout(()=>countdownWrap.style.display='none',600);

  mainEl.setAttribute('aria-hidden','false');
  cakeSection.style.display='flex';
  setTimeout(()=>{cakeImg.style.opacity='1';},150);

  // start audio only AFTER countdown
  bgAudio.play().catch(()=>{
    document.body.addEventListener('click',()=>bgAudio.play(),{once:true});
  });
}

/* single burst confetti */
const confetti = window.confetti.create(document.getElementById('confetti-canvas'),{resize:true,useWorker:true});
function singleConfetti(){
  for(let i=0;i<7;i++){
    setTimeout(()=>{
      confetti({
        particleCount:150,
        spread:360,
        startVelocity:55,
        origin:{x:0.5,y:0.5}
      });
    }, i*250);
  }
}

/* Gift popup */
function openGift(){ giftPopup.style.display='block'; giftModal.style.display='none'; }
function revealPhoto(){ giftIcon.style.display='none'; giftModal.style.display='block'; }
function closeGift(){ giftPopup.style.display='none'; giftIcon.style.display='inline-block'; }

giftIcon.addEventListener('click',revealPhoto);
closeGiftBtn.addEventListener('click',closeGift);

/* Cake cut */
cutBtn.addEventListener('click',()=>{
  singleConfetti();
  setTimeout(openGift,2000);
});

/* Memories button */
goMemBtn.addEventListener('click',()=>{
  document.body.style.transition="opacity 1s";
  document.body.style.opacity="0";
  setTimeout(()=>{ window.location.href="train.html"; },1000);
});
</script>
</body>
</html>
